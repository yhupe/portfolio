<!DOCTYPE html>
<html lang="en" class="bg-ink-900 text-paper-100">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Welcome!{% endblock %}</title>

  <!-- Favicon -->
  <link rel="icon" href="/static/img/favicon.ico" sizes="any" />

  <!-- Tailwind CSS (gebaut) -->
  <link rel="stylesheet" href="/static/css/output.css" />

  <!-- GSAP + ScrollTrigger (global eingebunden, aber ohne Seiteneffekte) -->
  <script defer src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>
  <script defer src="https://unpkg.com/gsap@3/dist/ScrollTrigger.min.js"></script>

  <!-- Theme aus LocalStorage anwenden (verhindert FOUC) -->
  <script>
    (function () {
      const saved = localStorage.getItem('theme');
      if (saved === 'dark') document.documentElement.classList.add('dark','bg-ink-900');
      if (saved === 'light') document.documentElement.classList.remove('dark');
    })();
  </script>

  {% block head_extra %}{% endblock %}
</head>

<body class="min-h-screen flex flex-col transition-colors duration-300 bg-ink-900 text-paper-100">

  <!-- Navbar -->
  <header class="fixed top-0 left-0 right-0 z-50 backdrop-blur supports-backdrop-blur:bg-ink-900/60 bg-ink-900/80 border-b border-white/5">
    <div class="container mx-auto px-4 h-16 flex items-center justify-between">
      <a href="/" class="font-semibold tracking-wide">Hannes</a>

      <nav class="hidden md:flex gap-6 text-sm">
        <a href="/" class="hover:text-accent-sky">Home</a>
        <a href="/about" class="hover:text-accent-mint">About</a>
        <a href="/projects" class="hover:text-accent-peach">Projects</a>
        <a href="/blog" class="hover:text-accent-lilac">Blog</a>
        <a href="/contact" class="hover:text-accent-mint">Contact</a>
      </nav>

      <!-- Light/Dark toggle -->
      <button id="themeToggle"
        class="rounded px-3 py-1 text-xs border border-white/10 hover:border-white/20 hover:bg-white/5">
        Toggle theme
      </button>
    </div>
  </header>

  <!-- Hauptbereich: Seiten füllen hier ihren Content ein -->
  <main class="flex-1 container mx-auto px-4 pt-24 pb-12">
    {% block content %}{% endblock %}
  </main>

  <!-- Footer -->
  <footer class="border-t border-white/5 py-6 text-xs text-white/50">
    <div class="container mx-auto px-4 flex justify-between">
      <span>© {{ year }} Hannes Pickel</span>
      <a href="/imprint" class="hover:text-accent-lilac">Imprint</a>
    </div>
  </footer>

  <!-- Globale Skripte (ohne Animationen) -->
  <script>
    // Theme Toggle
    document.getElementById('themeToggle').addEventListener('click', () => {
      const root = document.documentElement;
      const isDark = root.classList.toggle('dark');
      if (isDark) {
        root.classList.add('bg-ink-900');
        localStorage.setItem('theme', 'dark');
      } else {
        localStorage.setItem('theme', 'light');
      }
    });

    // GSAP/ScrollTrigger nur registrieren; seiten-spezifische Animationen kommen in scripts_extra
    window.addEventListener('load', () => {
      if (window.gsap && window.ScrollTrigger) gsap.registerPlugin(ScrollTrigger);
    });
  </script>

  {% block scripts_extra %}{% endblock %}
</body>
</html>
